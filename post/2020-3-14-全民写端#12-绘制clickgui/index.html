<!doctype html><html><head><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>[全民写端]#12绘制ClickGUI</title>
<link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/css/styles.css></head><body class="d-flex flex-column justify-content-between min-vh-100"><nav class="navbar navbar-expand-lg bg-light"><div class=container-fluid><a class=navbar-brand href=/><img src=/assets/github.svg alt=Logo width=30 height=24 class="d-inline-block align-text-top">
Enaium的博客
</a><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarNav aria-controls=navbarNav aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarNav><ul class=navbar-nav><li class=nav-item><a class=nav-link aria-current=page href=https://blog.enaium.cn/contact/>联系</a></li><li class=nav-item><a class=nav-link aria-current=page href=https://blog.enaium.cn/about/>关于</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" data-bs-toggle=dropdown href=# role=button aria-expanded=false><img alt=Logo width=30 height=24 src=/assets/language.svg></a><ul class=dropdown-menu></ul></li></ul></div></div></nav><div style=flex:1><div class=container><div class=card><div class=card-header>[全民写端]#12绘制ClickGUI</div><div class=card-body><div class=card-text><p>一. 先复制进去<code>FontUtils</code></p><h2 id=fontutils>FontUtils</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> cn.enaium.coreium.utils;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> net.minecraft.client.Minecraft;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> net.minecraft.client.gui.FontRenderer;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> net.minecraft.util.StringUtils;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>FontUtils</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> FontRenderer fontRenderer;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setupFontUtils</span>() {
</span></span><span style=display:flex><span>        fontRenderer <span style=color:#f92672>=</span> Minecraft.<span style=color:#a6e22e>getMinecraft</span>().<span style=color:#a6e22e>fontRendererObj</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>getStringWidth</span>(String text) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> fontRenderer.<span style=color:#a6e22e>getStringWidth</span>(StringUtils.<span style=color:#a6e22e>stripControlCodes</span>(text));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>getFontHeight</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> fontRenderer.<span style=color:#a6e22e>FONT_HEIGHT</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>drawString</span>(String text, <span style=color:#66d9ef>int</span> x, <span style=color:#66d9ef>int</span> y, <span style=color:#66d9ef>int</span> color) {
</span></span><span style=display:flex><span>        fontRenderer.<span style=color:#a6e22e>drawString</span>(text, x, y, color);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>drawStringWithShadow</span>(String text, <span style=color:#66d9ef>double</span> x, <span style=color:#66d9ef>double</span> y, <span style=color:#66d9ef>int</span> color) {
</span></span><span style=display:flex><span>        fontRenderer.<span style=color:#a6e22e>drawStringWithShadow</span>(text, (<span style=color:#66d9ef>float</span>)x, (<span style=color:#66d9ef>float</span>)y, color);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>drawCenteredString</span>(String text, <span style=color:#66d9ef>int</span> x, <span style=color:#66d9ef>int</span> y, <span style=color:#66d9ef>int</span> color) {
</span></span><span style=display:flex><span>        FontUtils.<span style=color:#a6e22e>drawString</span>(text, x <span style=color:#f92672>-</span> fontRenderer.<span style=color:#a6e22e>getStringWidth</span>(text) <span style=color:#f92672>/</span> 2, y, color);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>drawCenteredStringWithShadow</span>(String text, <span style=color:#66d9ef>double</span> x, <span style=color:#66d9ef>double</span> y, <span style=color:#66d9ef>int</span> color) {
</span></span><span style=display:flex><span>        FontUtils.<span style=color:#a6e22e>drawStringWithShadow</span>(text, x <span style=color:#f92672>-</span> (<span style=color:#66d9ef>double</span>)(fontRenderer.<span style=color:#a6e22e>getStringWidth</span>(text) <span style=color:#f92672>/</span> 2), y, color);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>drawTotalCenteredString</span>(String text, <span style=color:#66d9ef>int</span> x, <span style=color:#66d9ef>int</span> y, <span style=color:#66d9ef>int</span> color) {
</span></span><span style=display:flex><span>        FontUtils.<span style=color:#a6e22e>drawString</span>(text, x <span style=color:#f92672>-</span> fontRenderer.<span style=color:#a6e22e>getStringWidth</span>(text) <span style=color:#f92672>/</span> 2, y <span style=color:#f92672>-</span> fontRenderer.<span style=color:#a6e22e>FONT_HEIGHT</span> <span style=color:#f92672>/</span> 2, color);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>drawTotalCenteredStringWithShadow</span>(String text, <span style=color:#66d9ef>double</span> x, <span style=color:#66d9ef>double</span> y, <span style=color:#66d9ef>int</span> color) {
</span></span><span style=display:flex><span>        FontUtils.<span style=color:#a6e22e>drawStringWithShadow</span>(text, x <span style=color:#f92672>-</span> (<span style=color:#66d9ef>double</span>)(fontRenderer.<span style=color:#a6e22e>getStringWidth</span>(text) <span style=color:#f92672>/</span> 2), y <span style=color:#f92672>-</span> (<span style=color:#66d9ef>double</span>)((<span style=color:#66d9ef>float</span>)fontRenderer.<span style=color:#a6e22e>FONT_HEIGHT</span> <span style=color:#f92672>/</span> 2.<span style=color:#a6e22e>0f</span>), color);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>二. 开始绘制</p><h2 id=clickgui>ClickGUI</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> cn.enaium.coreium.gui.clickgui;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> cn.enaium.coreium.module.Category;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> net.minecraft.client.gui.Gui;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> net.minecraft.client.gui.GuiScreen;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.io.IOException;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.ArrayList;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ClickGUI</span> <span style=color:#66d9ef>extends</span> GuiScreen {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> ArrayList<span style=color:#f92672>&lt;</span>CategoryPanel<span style=color:#f92672>&gt;</span> categoryPanels;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>ClickGUI</span>() {
</span></span><span style=display:flex><span>        <span style=color:#75715e>//添加Category</span>
</span></span><span style=display:flex><span>        categoryPanels <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span> categoryPanelsY <span style=color:#f92672>=</span> 5;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (Category c : Category.<span style=color:#a6e22e>values</span>()) {
</span></span><span style=display:flex><span>            categoryPanels.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> CategoryPanel(c, 5, categoryPanelsY, 100, 20));
</span></span><span style=display:flex><span>            categoryPanelsY <span style=color:#f92672>+=</span> 30;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>drawScreen</span>(<span style=color:#66d9ef>int</span> mouseX, <span style=color:#66d9ef>int</span> mouseY, <span style=color:#66d9ef>float</span> partialTicks) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (CategoryPanel c : categoryPanels) {
</span></span><span style=display:flex><span>            c.<span style=color:#a6e22e>drawScreen</span>(mouseX, mouseY);<span style=color:#75715e>//绘制所有Category</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>super</span>.<span style=color:#a6e22e>drawScreen</span>(mouseX, mouseY, partialTicks);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>mouseClicked</span>(<span style=color:#66d9ef>int</span> mouseX, <span style=color:#66d9ef>int</span> mouseY, <span style=color:#66d9ef>int</span> mouseButton) <span style=color:#66d9ef>throws</span> IOException {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (CategoryPanel c : categoryPanels) {
</span></span><span style=display:flex><span>            c.<span style=color:#a6e22e>mouseClicked</span>(mouseX, mouseY,mouseButton);<span style=color:#75715e>//调用所有CategoryPanel的mouseClicked方法</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>super</span>.<span style=color:#a6e22e>mouseClicked</span>(mouseX, mouseY, mouseButton);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>mouseReleased</span>(<span style=color:#66d9ef>int</span> mouseX, <span style=color:#66d9ef>int</span> mouseY, <span style=color:#66d9ef>int</span> state) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (CategoryPanel c : categoryPanels) {
</span></span><span style=display:flex><span>            c.<span style=color:#a6e22e>mouseReleased</span>(mouseX, mouseY,state);<span style=color:#75715e>//调用所有CategoryPanel的mouseReleased方法</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>super</span>.<span style=color:#a6e22e>mouseReleased</span>(mouseX, mouseY, state);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>isHovered</span>(<span style=color:#66d9ef>int</span> mouseX, <span style=color:#66d9ef>int</span> mouseY, <span style=color:#66d9ef>int</span> x, <span style=color:#66d9ef>int</span> y, <span style=color:#66d9ef>int</span> width, <span style=color:#66d9ef>int</span> height) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> mouseX <span style=color:#f92672>&gt;=</span> x <span style=color:#f92672>&amp;&amp;</span> mouseX <span style=color:#f92672>-</span> width <span style=color:#f92672>&lt;=</span> x <span style=color:#f92672>&amp;&amp;</span> mouseY <span style=color:#f92672>&gt;=</span> y <span style=color:#f92672>&amp;&amp;</span> mouseY <span style=color:#f92672>-</span> height <span style=color:#f92672>&lt;=</span> y;<span style=color:#75715e>//获取鼠标位置是否在指定位置</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>drawRect</span>(<span style=color:#66d9ef>int</span> x, <span style=color:#66d9ef>int</span> y, <span style=color:#66d9ef>int</span> width, <span style=color:#66d9ef>int</span> height, <span style=color:#66d9ef>int</span> color) {
</span></span><span style=display:flex><span>        Gui.<span style=color:#a6e22e>drawRect</span>(x, y, x <span style=color:#f92672>+</span> width, y <span style=color:#f92672>+</span> height, color);<span style=color:#75715e>//绘制Rect</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=categorypanel>CategoryPanel</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> cn.enaium.coreium.gui.clickgui;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> cn.enaium.coreium.Coreium;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> cn.enaium.coreium.module.Category;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> cn.enaium.coreium.module.Module;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> cn.enaium.coreium.utils.FontUtils;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> net.minecraft.client.Minecraft;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> net.minecraft.client.gui.FontRenderer;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> net.minecraft.client.gui.Gui;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.awt.*;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.ArrayList;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CategoryPanel</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> Category category;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>boolean</span> hovered;
</span></span><span style=display:flex><span>    <span style=color:#75715e>//单独Category的位置</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> x;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> y;
</span></span><span style=display:flex><span>    <span style=color:#75715e>//单独Category的长高</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> width;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> height;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> dragging;<span style=color:#75715e>//是否为移动状态</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//临时单独Category的位置（上一个位置）</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> tempX;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> tempY;
</span></span><span style=display:flex><span>    <span style=color:#75715e>//是否显示ModulePanel</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>boolean</span> displayModulePanel;
</span></span><span style=display:flex><span>    <span style=color:#75715e>//ModulePanel列表</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> ArrayList<span style=color:#f92672>&lt;</span>ModulePanel<span style=color:#f92672>&gt;</span> modulePanels;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>CategoryPanel</span>(Category category, <span style=color:#66d9ef>int</span> x, <span style=color:#66d9ef>int</span> y, <span style=color:#66d9ef>int</span> width, <span style=color:#66d9ef>int</span> height) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>category</span> <span style=color:#f92672>=</span> category;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> x;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>=</span> y;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>width</span> <span style=color:#f92672>=</span> width;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>=</span> height;
</span></span><span style=display:flex><span>        FontUtils.<span style=color:#a6e22e>setupFontUtils</span>();<span style=color:#75715e>//设置Font</span>
</span></span><span style=display:flex><span>        modulePanels <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        ArrayList<span style=color:#f92672>&lt;</span>Module<span style=color:#f92672>&gt;</span> modules <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>        modules.<span style=color:#a6e22e>addAll</span>(Coreium.<span style=color:#a6e22e>instance</span>.<span style=color:#a6e22e>moduleManager</span>.<span style=color:#a6e22e>getModulesForCategory</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>category</span>));<span style=color:#75715e>//获取该分类所以Module</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (Module m : modules) {
</span></span><span style=display:flex><span>            modulePanels.<span style=color:#a6e22e>add</span>(<span style=color:#66d9ef>new</span> ModulePanel(m));<span style=color:#75715e>//添加ModulePanel</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>drawScreen</span>(<span style=color:#66d9ef>int</span> mouseX, <span style=color:#66d9ef>int</span> mouseY) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>hovered</span> <span style=color:#f92672>=</span> ClickGUI.<span style=color:#a6e22e>isHovered</span>(mouseX, mouseY, <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span>, <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span>, <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>width</span>, <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>height</span>);<span style=color:#75715e>//获取鼠标是否在指定位置</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>dragging</span>) {
</span></span><span style=display:flex><span>            <span style=color:#75715e>//移动CategoryPanel</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>tempX</span> <span style=color:#f92672>+</span> mouseX;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>tempY</span> <span style=color:#f92672>+</span> mouseY;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#75715e>//改变Category颜色</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span> color <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Color(0, 190, 255).<span style=color:#a6e22e>getRGB</span>();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>hovered</span>) color <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Color(0, 88, 120).<span style=color:#a6e22e>getRGB</span>();
</span></span><span style=display:flex><span>        ClickGUI.<span style=color:#a6e22e>drawRect</span>(x, y, <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>width</span>, <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>height</span>, color);<span style=color:#75715e>//绘制Category背景</span>
</span></span><span style=display:flex><span>        FontUtils.<span style=color:#a6e22e>drawCenteredString</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>category</span>.<span style=color:#a6e22e>name</span>(), x <span style=color:#f92672>+</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> 2, y <span style=color:#f92672>+</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> 2, Color.<span style=color:#a6e22e>WHITE</span>.<span style=color:#a6e22e>getRGB</span>());<span style=color:#75715e>//绘制Category的标题</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span> modulePanelsY <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>+</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>height</span>;
</span></span><span style=display:flex><span>        <span style=color:#75715e>//绘制该Category下的所有Module</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>displayModulePanel</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> (ModulePanel module : modulePanels) {
</span></span><span style=display:flex><span>                module.<span style=color:#a6e22e>drawScreen</span>(mouseX,mouseY,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> 10, modulePanelsY, 80, 20);
</span></span><span style=display:flex><span>                modulePanelsY <span style=color:#f92672>+=</span> 20;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>mouseClicked</span>(<span style=color:#66d9ef>int</span> mouseX, <span style=color:#66d9ef>int</span> mouseY, <span style=color:#66d9ef>int</span> mouseButton) {
</span></span><span style=display:flex><span>        <span style=color:#75715e>//如果鼠标在指定位置</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>//如果鼠标左键按下</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>hovered</span> <span style=color:#f92672>&amp;&amp;</span> mouseButton <span style=color:#f92672>==</span> 0) {
</span></span><span style=display:flex><span>            <span style=color:#75715e>//移动状态为true</span>
</span></span><span style=display:flex><span>            dragging <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>            <span style=color:#75715e>//给临时坐标赋值</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>tempX</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>-</span> mouseX;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>tempY</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>-</span> mouseY;
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>hovered</span> <span style=color:#f92672>&amp;&amp;</span> mouseButton <span style=color:#f92672>==</span> 1) {<span style=color:#75715e>//如果鼠标右键被按下</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>displayModulePanel</span> <span style=color:#f92672>=</span> <span style=color:#f92672>!</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>displayModulePanel</span>;<span style=color:#75715e>//是否显示Module</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (ModulePanel modulePanel : modulePanels) {<span style=color:#75715e>//调用所有ModulePanel的mouseClicked方法</span>
</span></span><span style=display:flex><span>            modulePanel.<span style=color:#a6e22e>mouseClicked</span>(mouseX,mouseY,mouseButton);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>mouseReleased</span>(<span style=color:#66d9ef>int</span> mouseX, <span style=color:#66d9ef>int</span> mouseY, <span style=color:#66d9ef>int</span> state) {
</span></span><span style=display:flex><span>        <span style=color:#75715e>//如果鼠标左键被释放退出移动Category模式</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (state <span style=color:#f92672>==</span> 0) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>dragging</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=modulepanel>ModulePanel</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> cn.enaium.coreium.gui.clickgui;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> cn.enaium.coreium.module.Module;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> cn.enaium.coreium.utils.FontUtils;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.awt.*;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ModulePanel</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> Module module;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>boolean</span> hovered;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>ModulePanel</span>(Module module) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>module</span> <span style=color:#f92672>=</span> module;
</span></span><span style=display:flex><span>        FontUtils.<span style=color:#a6e22e>setupFontUtils</span>();<span style=color:#75715e>//设置Font</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>drawScreen</span>(<span style=color:#66d9ef>int</span> mouseX, <span style=color:#66d9ef>int</span> mouseY, <span style=color:#66d9ef>int</span> x, <span style=color:#66d9ef>int</span> y, <span style=color:#66d9ef>int</span> width, <span style=color:#66d9ef>int</span> height) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>hovered</span> <span style=color:#f92672>=</span> ClickGUI.<span style=color:#a6e22e>isHovered</span>(mouseX, mouseY, x, y, width, height);<span style=color:#75715e>//鼠标是否在指定位置</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span> color <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Color(200, 190, 255).<span style=color:#a6e22e>getRGB</span>();<span style=color:#75715e>//颜色</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>isToggle</span>()) color <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Color(200, 0, 120).<span style=color:#a6e22e>getRGB</span>();<span style=color:#75715e>//Module打开的颜色</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>hovered</span>) color <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Color(200, 88, 120).<span style=color:#a6e22e>getRGB</span>();<span style=color:#75715e>//鼠标在指定位置的颜色</span>
</span></span><span style=display:flex><span>        ClickGUI.<span style=color:#a6e22e>drawRect</span>(x, y, width, height, color);<span style=color:#75715e>//绘制Module的背景</span>
</span></span><span style=display:flex><span>        FontUtils.<span style=color:#a6e22e>drawCenteredString</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>getName</span>(), x <span style=color:#f92672>+</span> width <span style=color:#f92672>/</span> 2, y <span style=color:#f92672>+</span> height <span style=color:#f92672>/</span> 2, Color.<span style=color:#a6e22e>WHITE</span>.<span style=color:#a6e22e>getRGB</span>());<span style=color:#75715e>//绘制Module的名字</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>mouseClicked</span>(<span style=color:#66d9ef>int</span> mouseX, <span style=color:#66d9ef>int</span> mouseY, <span style=color:#66d9ef>int</span> mouseButton) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>hovered</span> <span style=color:#f92672>&amp;&amp;</span> mouseButton <span style=color:#f92672>==</span> 0) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>toggle</span>();<span style=color:#75715e>//当鼠标在指定位置并且鼠标被按下设置Module为关闭或打开</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>三. 打开<code>ClickGUI</code></p><h2 id=click>Click</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> cn.enaium.coreium.module.modules.render;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> cn.enaium.coreium.gui.clickgui.ClickGUI;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> cn.enaium.coreium.module.Category;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> cn.enaium.coreium.module.Module;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.lwjgl.input.Keyboard;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Click</span> <span style=color:#66d9ef>extends</span> Module {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>Click</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>super</span>(<span style=color:#e6db74>&#34;ClickGUI&#34;</span>, Keyboard.<span style=color:#a6e22e>KEY_RSHIFT</span>, Category.<span style=color:#a6e22e>RENDER</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>onEnable</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>super</span>.<span style=color:#a6e22e>onEnable</span>();
</span></span><span style=display:flex><span>        mc.<span style=color:#a6e22e>displayGuiScreen</span>(<span style=color:#66d9ef>new</span> ClickGUI());
</span></span><span style=display:flex><span>        toggle();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=getmodulesforcategory>getModulesForCategory</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>    <span style=color:#66d9ef>public</span> ArrayList<span style=color:#f92672>&lt;</span>Module<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>getModulesForCategory</span>(Category c) {
</span></span><span style=display:flex><span>        ArrayList<span style=color:#f92672>&lt;</span>Module<span style=color:#f92672>&gt;</span> modules <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (Module m : <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>modules</span> ) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span>(m.<span style=color:#a6e22e>getCategory</span>().<span style=color:#a6e22e>equals</span>(c))
</span></span><span style=display:flex><span>                modules.<span style=color:#a6e22e>add</span>(m);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> modules;
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div></div><div class="d-flex justify-content-between"><a class=text-reset href=https://blog.enaium.cn/post/2020-3-3-%E5%85%A8%E6%B0%91%E5%86%99%E7%AB%AF%2311%E7%BB%98%E5%88%B6%E4%B8%BB%E8%8F%9C%E5%8D%95/>[全民写端]#11绘制主菜单</a>
<a class=text-reset href=https://blog.enaium.cn/post/2020-3-25-%E5%85%A8%E6%B0%91%E5%86%99%E7%AB%AF%E7%AC%AC%E4%BA%8C%E5%AD%A3%231%E9%85%8D%E7%BD%AE%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/>[全民写端第二季]#1配置开发环境</a></div></div></div></div></div><footer class="p-5 bg-dark text-white text-center"><div class=container><p class=lead>Copyright &copy; 2024 Enaium</p></div></footer><script src=/js/bootstrap.bundle.min.js></script></body></html>