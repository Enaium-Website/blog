<!doctype html><html><head><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Rust实战开发 编写Minecraft启动器#1启动方法</title>
<link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/css/styles.css></head><body class="d-flex flex-column justify-content-between min-vh-100"><nav class="navbar navbar-expand-lg bg-light"><div class=container-fluid><a class=navbar-brand href=/><img src=/assets/github.svg alt=Logo width=30 height=24 class="d-inline-block align-text-top">
Enaium的博客
</a><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarNav aria-controls=navbarNav aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarNav><ul class=navbar-nav><li class=nav-item><a class=nav-link aria-current=page href=https://blog.enaium.cn/contact/>联系</a></li><li class=nav-item><a class=nav-link aria-current=page href=https://blog.enaium.cn/about/>关于</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" data-bs-toggle=dropdown href=# role=button aria-expanded=false><img alt=Logo width=30 height=24 src=/assets/language.svg></a><ul class=dropdown-menu></ul></li></ul></div></div></nav><div style=flex:1><div class=container><div class=card><div class=card-header>Rust实战开发 编写Minecraft启动器#1启动方法</div><div class=card-body><div class=card-text><h2 id=引言>引言</h2><p>想必大家都知道<code>Minecraft</code>这个游戏，它是一个非常有趣的游戏，有没有想过它是如何启动的呢？在本系列中，我们将使用<code>Rust</code>编写一个简单的<code>Minecraft</code>启动器。</p><p>本系列文章涉及的<code>Rust</code>知识并不多，了解<code>Rust</code>的基本语法即可，如果你对<code>Minecraft</code>或者<code>Java</code>有一定了解，那么会更容易理解本系列的内容。</p><h2 id=启动方法>启动方法</h2><p>首先<code>Minecarft</code>是使用<code>Java</code>编写的，所以我们需要通过执行<code>Java</code>命令来启动<code>Minecraft</code>，并且也需要添加一些参数，比如游戏的一些资源文件，<code>Java</code>的一些参数等等。</p><p>大概就像这样：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>java -Xmx10745m -cp <span style=color:#e6db74>&#34;minecraft.jar;lib/*&#34;</span> -Djava.library.path<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;natives&#34;</span> net.minecraft.client.main.Main --username yourname --version 1.21
</span></span></code></pre></div><h3 id=下载资源>下载资源</h3><p>第一步我们需要下载<code>Minecraft</code>的资源文件，包括游戏本体、依赖库、资源文件。</p><p><code>http://launchermeta.mojang.com/mc/game/version_manifest.json</code>这个地址可以读取到游戏所有版本。</p><p><code>https://piston-meta.mojang.com/v1/packages/&lt;sha1>/&lt;version>.json</code>这个地址可以获取到游戏的配置信息。</p><p><code>http://resources.download.minecraft.net/&lt;sha1_first_two>/&lt;sha1></code>这个地址可以获取到游戏的资源文件。</p><p><code>https://libraries.minecraft.net/&lt;group>/&lt;artifact>/&lt;version>/&lt;artifact>-&lt;version>.jar</code>这个地址可以获取到游戏的依赖库。</p><h3 id=拼接命令>拼接命令</h3><p>完成以上步骤后，我们就可以拼接命令了，首先是<code>java</code>的程序路径，然后是<code>JVM</code>参数，然后是<code>classpath</code>，接着是<code>main</code>方法的类路径，最后是<code>Minecraft</code>的参数。</p><p>拼接完成之后就可以执行这个命令启动游戏了。</p><h2 id=项目结果>项目结果</h2><p>本项目分为 4 个模块：<code>download</code>, <code>launch</code>, <code>model</code>, <code>parse</code>。</p><ul><li><p><code>download</code>模块用于下载游戏资源文件。</p></li><li><p><code>launch</code>模块用于启动游戏。</p></li><li><p><code>model</code>模块用建立游戏的数据模型。</p></li><li><p><code>parse</code>模块用于解析游戏的配置文件(可有可无，用来测试建立的模型是否正确)。</p></li></ul><h2 id=流程>流程</h2><pre tabindex=0><code class=language-mermaid data-lang=mermaid>graph LR
    建立资源模型 --&gt; 解析资源配置 --&gt; 下载游戏资源 --&gt; 拼接启动命令 --&gt; 启动游戏
</code></pre></div><div class="d-flex justify-content-between"><a class=text-reset href=https://blog.enaium.cn/post/2024-6-8-%E4%BD%BF%E7%94%A8kotlin%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AAhttp%E6%9C%8D%E5%8A%A1%E5%99%A8/>使用Kotlin编写一个Http服务器</a></div></div></div></div></div><footer class="p-5 bg-dark text-white text-center"><div class=container><p class=lead>Copyright &copy; 2024 Enaium</p></div></footer><script src=/js/bootstrap.bundle.min.js></script></body></html>